{% extends 'admin/master.html' %}
{% import 'admin/macros.html' as macros %}
{% block body %}
{{ super() }}
<table class="table table-condensed">
  <thead>
    <tr>
      <th><a href="{{url_for('admin.index', sort='survey', reverse=reverse)}}">Survey</a></th>
      <th><a href="{{url_for('admin.index', sort='ward', reverse=reverse)}}">Ward</a></th>
      <th><a href="{{url_for('admin.index', sort='date', reverse=reverse)}}">Survey date</a></th>
      <th><a href="{{url_for('admin.index', sort='box_number', reverse=reverse)}}">Box number</a></th>
      <th><a href="{{url_for('admin.index', sort='box_collected', reverse=reverse)}}">Box collected?</a></th>
      <th><a href="{{url_for('admin.index', sort='surveyors_name', reverse=reverse)}}">Surveyor</a></th>
      <th><a href="{{url_for('admin.index', sort='got_result', reverse=reverse)}}">Result</a></th>
      <th><a href="{{url_for('admin.index', sort='got_month', reverse=reverse)}}">One month</a></th>
      <th><a href="{{url_for('admin.index', sort='got_year', reverse=reverse)}}">One year</a></th>
    </tr>
  </thead>
  <tbody>
    {% for survey in surveys %}
    <tr>
      <td><a href="/admin/survey/{{survey.id}}">
          {{survey.name}}, {{survey.address_line}}</a></td>
      <td>{{survey.ward}}</td>
      <td>{{survey.survey_date}}</td>
      <td>
        {% if survey.result and survey.result[0].cheese_box_number %}
          {{survey.result[0].cheese_box_number}}
        {% endif %}
      </td>
      <td>{{ macros.render_boolean(survey.box_collected) }}</td>
      <td>
        {% if survey.result and survey.result[0].surveyors_name %}
          {{survey.result[0].surveyors_name}}
        {% endif %}
      </td>
      <td>{{ macros.render_boolean(survey.result) }}</td>
      <td>{{ macros.render_boolean(survey.month_feedback) }} </td>
      <td>{{ macros.render_boolean(survey.year_feedback) }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock body %}
